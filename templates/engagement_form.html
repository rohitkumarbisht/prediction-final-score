<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Student Engagement Prediction</title>
        <link rel="stylesheet"
            href="{{url_for('static', filename='../static/style.css')}}">
    </head>

    <body>
        <h3>Please enter below required fields for student engagement
            prediction</h3>
        <h4>Predict student engagement level</h4>
        <div class="dropdown">
            <label for="engagement_level" class="feature-label">Select:</label>
            <select id="engagement_level" name="engagement_level">
                <option value="low">Low</option>
                <option value="moderate">Moderate</option>
                <option value="high">High</option>
            </select>
        </div>
        <form action="/prediction-eng" method="post" id="prediction-form">
            <input type="hidden" name="features"
                value="{{ selected_features|join(',') }}">
            <div class="form-container">
                {% for feature in selected_features %}
                <div class="form-group">
                    <label for="{{ feature }}" class="feature-label">
                        {% for field_name, label in fields %}
                        {% if feature == field_name %}
                        {{ label }} <!-- label that will display -->
                        {% endif %}
                        {% endfor %}:
                    </label>
                    <input type="number" id="{{ feature }}" name="{{ feature }}"
                        placeholder class="small-input">
                </div>
                {% endfor %}
            </div>
            <input type="submit" value="Predict Engagement Level">
        </form>

        <script>
        // Define data for low, moderate, and high engagement levels
        var dataForLevels = {
            "low": {
                // Define values for each field when "Low" is selected
                "No_of_Logins": 47,
                "ContentReads": 60,
                "ForumReads": 1,
                "Assignment1_submit": 558,
                "Assignment2_submit": 296,
                "Assignment3_submit": 632,
                "Average_time_to_submit_assignment": 495,
                "Assignment1_delay":1,
                "Assignment2_delay":1,
                "Assignment3_delay":1
            },
            "moderate": {
                // Define values for each field when "Moderate" is selected
                "No_of_Logins": 122,
                "ContentReads": 211,
                "ForumReads": 0,
                "Assignment1_submit": 325,
                "Assignment2_submit": 237,
                "Assignment3_submit": 261,
                "Average_time_to_submit_assignment": 274,
                "Assignment1_delay":0,
                "Assignment2_delay":1,
                "Assignment3_delay":1
            },
            "high": {
                // Define values for each field when "High" is selected
                "No_of_Logins": 146,
                "ContentReads": 366,
                "ForumReads": 0,
                "Assignment1_submit": 159,
                "Assignment2_submit": 41,
                "Assignment3_submit": 89,
                "Average_time_to_submit_assignment": 96,
                "Assignment1_delay":0,
                "Assignment2_delay":0,
                "Assignment3_delay":0
            }
        };

        // Function to update form fields based on the selected engagement level
        function updateFormFields() {
            var selectedLevel = document.getElementById("engagement_level").value;
            var form = document.getElementById("prediction-form");

            // Loop through the selected fields and set their values
            for (var field in dataForLevels[selectedLevel]) {
                var inputField = form.querySelector('[name="' + field + '"]');
                if (inputField) {
                    inputField.value = dataForLevels[selectedLevel][field];
                }
            }
        }
        // Add an event listener to the dropdown to trigger field updates
        document.getElementById("engagement_level").addEventListener("change", updateFormFields);
        // Call the update function initially to set default values
        updateFormFields();
    </script>
    </body>
</html>
