<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <title>Distribution Graph</title>
        <link rel="stylesheet"
            href="{{url_for('static', filename='../static/distribution_graph.css')}}">
    </head>
    <h2>Dataset Analysis</h2>
    <div class="toggle-graph">
        <button id="toggleButton" class="toggle-button" onclick="toggleGraph()">
            <i class="fa fa-caret-down"></i> Distribution Graph
        </button>
        <div id="graph-container" class="graph-container hidden">
            <img class="distribution-graph"
                src="{{ url_for('static', filename='../static/images/distribution.png') }}"
                alt="Distribution Graph">
        </div>
    </div>
    <h4>Select a column to generate correlation graph</h4>
    <div class="container">
        <form method="GET" action="/correlation-graph/" id="correlation-form">
            <label class="label" for="selected_column">Select a column:</label>
            <div class="dropdown">
                <select id="selected_column" name="selected_column">
                    {% for column in columns %}

                    <option value="{{ column }}" {% if column ==
                        'final_exam_score' or column == selected_column
                        %}selected{% endif %}>
                        {% for field_name, label in fields %}
                        {% if column==field_name %}
                        {{ label }}
                        {% endif %}
                        {% endfor %}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <div>
                    <input class="correlation-submit" type="submit"
                        value="Show Correlation For Engagement Level"
                        onclick="submitForm('for_eng_level')">
                </div>
                <div class="submit_buttons">
                    <input class="correlation-submit" type="submit"
                        value="Show Correlation With Scores"
                        onclick="submitForm('with_scores')">
                    <input class="correlation-submit" type="submit"
                        value="Show Correlation Without Scores"
                        onclick="submitForm('without_scores')">
                </div>
            </div>
        </form>
    </div>
    <script>
        function toggleGraph() {
            const graphContainer = document.getElementById("graph-container");
            const toggleButton = document.getElementById("toggleButton");

            if (graphContainer.classList.contains("hidden")) {
                graphContainer.classList.remove("hidden");
                toggleButton.innerHTML = '<i class="fa fa-caret-up"></i> Hide Graph';
            } else {
                graphContainer.classList.add("hidden");
                toggleButton.innerHTML = '<i class="fa fa-caret-down"></i> View Graph';
            }
        }

        function submitForm(action) {
            var form = document.getElementById("correlation-form");
            if (action === 'with_scores') {
                form.action = "/correlation-graph/with-score/";
            } else if (action === 'without_scores') {
                form.action = "/correlation-graph/without-score/";
            } else if (action === 'for_eng_level') {
                form.action = "/correlation-graph/for-engagement-level/"
            }
            form.submit();
        }
    </script>
    <body>

    </body>
</html>
